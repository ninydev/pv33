<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">

</head>
<body>

<div>
    <h1> Interval </h1>
    <button id="btnStart">Start</button>
    <button id="btnStop">Stop</button>
</div>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>


<script>

    setTimeout(()=> {
        Toastify({
            text: "Page loaded",
            className: "info",
            style: {
                background: "linear-gradient(to left, #00b09b, #96c93d)",
            },
            duration: 3000,
            close: true,
            gravity: "top",
            position: "right",
            stopOnFocus: true,
        }).showToast();
    }, 2000)

    let i = 0;

    let intervalId = null;

    document.getElementById("btnStop").onclick = function () {

        if (intervalId === null) {
            Toastify({
                text: "Iterator is not running!",
                className: "error",
                style: {
                    background: "linear-gradient(to right, #ff5555, #f00)",
                }
            }).showToast();
            return;
        }

        clearInterval(intervalId);
        intervalId = null;

        Toastify({
            text: "Iterator stopped!",
            className: "info",
            style: {
                background: "linear-gradient(to right, #00b09b, #96c93d)",
            },
            duration: 3000,
            close: true,
            gravity: "top",
            position: "right",
            stopOnFocus: true,
        }).showToast();


    };

    /**
     * Встановити запуск функції start по кліку на кнопку
     */
    document.getElementById("btnStart")
        .addEventListener("click", start);


    /**
     * Функція start - виводить повідомлення кожну секунду
     */
    function start() {
        if (intervalId !== null) {
            // Якщо інтервал вже запущений, не запускаємо його знову
            Toastify({
                text: "Iterator is running!",
                className: "error",
                style: {
                    background: "linear-gradient(to right, #ff0000, #ff7777)",
                }
            }).showToast();
            return;
        }

        // Запуск інтервала
        intervalId =  setInterval(() => {
            Toastify({
                text: "Iterator: " + i++,
                className: "info",
                style: {
                    background: "linear-gradient(to right, #00b09b, #96c93d)",
                }
            }).showToast();

            // Заблокувати JS на 10 секунд
            if (i === 4) {
                let timeNow = new Date();
                while (new Date() - timeNow < 10000){}
            }
        }, 1000);
    }


</script>


</body>
</html>